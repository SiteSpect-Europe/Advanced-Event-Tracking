/**
 * SiteSpect Advanced Event Tracking
 * Copyright 2019, SiteSpect Europe. All Rights Reserved.
 * V1.0.2
 */
var _stsp=_stsp||[];window.SS=window.SS||{},window.SS.Tracking={enumerate:function(e){document.querySelectorAll(e).forEach(function(e,t){e.setAttribute("stsp-sequence",t+1)})},hash:function(e){var t,n,r=1,c=0;if(e)for(r=0,t=e.length-1;t>=0;t--)r=0!==(c=266338304&(r=(r<<6&268435455)+(n=e.charCodeAt(t))+(n<<14)))?r^c>>21:r;return String(r)},send:function(e,t){for(var n=[],r=Object.entries(e),c=0;c<r.length;c++){var o=r[c],a=o[0],i=o[1],s="";["selector","filter","match","event","callback"].indexOf(a)>-1||(s="enumerate"==a?"sequence="+t.getAttribute("stsp-sequence"):"function"==typeof i?a+"="+i(t):a+"="+t,n.push(s))}n.sort();var l="/__ssobj/track?event="+e.event+"&"+n.join("&")+"&x="+Math.floor(99999999*Math.random())+"-1";try{var u=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest;u.open("GET",l),window.ssp_current_data&&(u.onreadystatechange=function(e,t,r){if(u.readyState==u.HEADERS_RECEIVED&&u.getResponseHeader("SiteSpect-Metrics-Info")){var c=u.getResponseHeader("SiteSpect-Metrics-Info"),o=JSON.parse(c),a={};for(id in o)newid=id+"-"+window.SS.Tracking.hash(n.join("&")),a[newid]={},Object.assign(a[newid],o[id]),a[newid].ID=newid,n.length&&(a[newid].Name+="<br/>AET: "+n.join(", "));c=JSON.stringify(a),function e(t,n){document.querySelector(".dx-pane--diagnostics .dx-pane--dx-table")?__preview_history.add_event_track_metric(c,"Metric (EventTrack)"):setTimeout(function(){e(t,n)},100)}(u,u)}})}catch(e){return!1}try{u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Accept","*/*")}catch(e){return!1}try{(window.SS.Tracking.debug||window.ssp_current_data)&&console.log(l),u.send(null)}catch(e){if(1&e.number)return!1}return!0},matcher:function(e){return!Object.entries(e).filter(function(e){var t=e[0],n=e[1];switch(t){case"hostname":case"pathname":case"href":case"host":case"hash":case"search":return!new RegExp(n).test(document.location[t]);case"cookie":return!new RegExp(n).test(document.cookie)}}).length},setup:function(){document.addEventListener("click",function(e){if(e.target)for(var t=0;t<_stsp.length;t++){var n=_stsp[t];if(n.event&&n.selector&&e.target.matches(n.selector+","+n.selector+" *")){var r=e.target.closest(n.selector);!r.getAttribute("stsp-sequence")&&n.enumerate&&window.SS.Tracking.enumerate(n.selector),n.filter&&!n.filter(r)||n.match&&!window.SS.Tracking.matcher(n.match)||(window.SS.Tracking.send(n,r),n.callback&&n.callback(data))}}}),_stsp.push=function(e){e.enumerate&&window.SS.Tracking.enumerate(e.selector),e.selector||e.filter&&!e.filter(element)||e.match&&!window.SS.Tracking.matcher(e.match)||(window.SS.Tracking.send(e,null),e.callback&&e.callback(e)),Array.prototype.push.call(this,e)}}},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var c=arguments[r];if(null!=c)for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o])}return n},writable:!0,configurable:!0}),window.SS.Tracking.setup();